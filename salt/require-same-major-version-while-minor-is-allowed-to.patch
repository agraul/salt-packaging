From b2cb48a2e339e07c075cdbbd108de8101695202d Mon Sep 17 00:00:00 2001
From: Michael Calmer <mc@suse.de>
Date: Wed, 28 Mar 2018 11:43:23 +0200
Subject: [PATCH] require same major version while minor is allowed to be
 higher

---
 salt/client/ssh/ssh_py_shim.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/salt/client/ssh/ssh_py_shim.py b/salt/client/ssh/ssh_py_shim.py
index e61a711b72..a9d4ff5c29 100644
--- a/salt/client/ssh/ssh_py_shim.py
+++ b/salt/client/ssh/ssh_py_shim.py
@@ -238,7 +238,7 @@ def get_executable():
             continue
         c_vn = tuple([int(x) for x in stdout.split(':')])
         for ns in pymap:
-            if c_vn >= pymap[ns] and os.path.exists(os.path.join(OPTIONS.saltdir, ns)):
+            if c_vn[0] == pymap[ns][0] and c_vn >= pymap[ns] and os.path.exists(os.path.join(OPTIONS.saltdir, ns)):
                 return py_cmd
 
     sys.exit(EX_THIN_PYTHON_INVALID)
-- 
2.16.2


