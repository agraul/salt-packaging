From 31c8f2c23a1766d53e43df1aa5c56598b259b35f Mon Sep 17 00:00:00 2001
From: Mihai Dinca <mdinca@suse.de>
Date: Thu, 22 Feb 2018 15:05:44 +0100
Subject: [PATCH] Fix salt-ssh state.apply "'NoneType' object has no
 attribute 'count'" and unicode issue

Co-authored-by: Jochen Breuer <jbreuer@suse.de>
---
 salt/utils/vt.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/salt/utils/vt.py b/salt/utils/vt.py
index fdc6fbeb40..51bf672dc3 100644
--- a/salt/utils/vt.py
+++ b/salt/utils/vt.py
@@ -340,7 +340,7 @@ class Terminal(object):
         if data is None or not data:
             return
         # PTY's always return \r\n as the line feeds
-        return data.replace('\r\n', os.linesep)
+        return data.decode('utf-8').replace('\r\n', os.linesep)
     # <---- Common Internal API ----------------------------------------------
 
     # ----- Context Manager Methods ----------------------------------------->
-- 
2.16.1


